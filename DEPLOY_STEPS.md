# üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è –¥–ª—è api.bigo.1tlt.ru

## üìã –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh username@—Ç–≤–æ–π-ip-–∞–¥—Ä–µ—Å
# –∏–ª–∏
ssh root@—Ç–≤–æ–π-ip-–∞–¥—Ä–µ—Å
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
sudo apt update && sudo apt upgrade -y
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18

```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
node --version
npm --version
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `v18.x.x` –∏ –≤–µ—Ä—Å–∏—è npm

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2

```bash
sudo npm install -g pm2

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
pm2 startup
```

**–í–∞–∂–Ω–æ:** PM2 –ø–æ–∫–∞–∂–µ—Ç –∫–æ–º–∞–Ω–¥—É —Ç–∏–ø–∞:
```bash
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u username --hp /home/username
```

**–í—ã–ø–æ–ª–Ω–∏ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É!** –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git

```bash
sudo apt install -y git
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
node --version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v18.x.x
npm --version
pm2 --version
git --version
```

---

## üì¶ –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
sudo mkdir -p /var/www
cd /var/www
```

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub**

```bash
sudo git clone https://github.com/–í–ê–®-USERNAME/bigo-mvp.git
cd bigo-mvp
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤—Ä—É—á–Ω—É—é**

```bash
# –°–æ–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo mkdir -p /var/www/bigo-mvp
cd /var/www/bigo-mvp

# –ó–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
# scp -r backend username@—Ç–≤–æ–π-ip:/var/www/bigo-mvp/
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Backend

```bash
cd /var/www/bigo-mvp/backend
sudo npm install --production
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫

### –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
sudo nano .env
```

**–í—Å—Ç–∞–≤—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–∑–∞–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è):**

```env
PORT=5000
MONGODB_URI=mongodb://localhost:27017/streaming-mvp
JWT_SECRET=–∏–∑–º–µ–Ω–∏-—ç—Ç–æ-–Ω–∞-—Å–ª—É—á–∞–π–Ω—É—é-—Å—Ç—Ä–æ–∫—É-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-12345678901234567890
JWT_EXPIRE=7d
CORS_ORIGIN=https://bigo.1tlt.ru,https://api.bigo.1tlt.ru,https://admin.bigo.1tlt.ru
NODE_ENV=production
```

**–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ nano:**
1. –ù–∞–∂–º–∏ `Ctrl + X`
2. –ù–∞–∂–º–∏ `Y` (–¥–∞, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
3. –ù–∞–∂–º–∏ `Enter`

**–í–∞–∂–Ω–æ:** 
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å MongoDB Atlas, –∑–∞–º–µ–Ω–∏ `MONGODB_URI` –Ω–∞ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Atlas
- `JWT_SECRET` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª–∏–Ω–Ω—ã–º –∏ —Å–ª—É—á–∞–π–Ω—ã–º (–º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: `openssl rand -base64 32`)

### –ó–∞–ø—É—Å–∫ Backend —á–µ—Ä–µ–∑ PM2

```bash
pm2 start server.js --name "bigo-backend"
pm2 save
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –°—Ç–∞—Ç—É—Å
pm2 status

# –õ–æ–≥–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫)
pm2 logs bigo-backend --lines 50
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –°—Ç–∞—Ç—É—Å `online`
- –í –ª–æ–≥–∞—Ö: `‚úÖ MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∞` –∏ `üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5000`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Backend –ª–æ–∫–∞–ª—å–Ω–æ

```bash
curl http://localhost:5000/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status":"ok","timestamp":"..."}`

---

## üåê –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache –∫–∞–∫ Reverse Proxy

### –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π Apache

```bash
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo a2enmod proxy_wstunnel
sudo a2enmod ssl
sudo a2enmod rewrite
sudo a2enmod headers
sudo systemctl restart apache2
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
apache2ctl -M | grep proxy
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å: `proxy_module`, `proxy_http_module`, `proxy_wstunnel_module`

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è api.bigo.1tlt.ru

```bash
sudo nano /etc/apache2/sites-available/bigo-backend.conf
```

**–í—Å—Ç–∞–≤—å —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

```apache
<VirtualHost *:80>
    ServerName api.bigo.1tlt.ru
    
    # –õ–æ–≥–∏
    ErrorLog ${APACHE_LOG_DIR}/bigo-backend-error.log
    CustomLog ${APACHE_LOG_DIR}/bigo-backend-access.log combined

    # Proxy –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
    ProxyPreserveHost On
    ProxyPass / http://localhost:5000/
    ProxyPassReverse / http://localhost:5000/

    # Proxy –¥–ª—è WebSocket (Socket.IO)
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*) ws://localhost:5000/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*) http://localhost:5000/$1 [P,L]

    # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è CORS (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    Header set Access-Control-Allow-Origin "*"
</VirtualHost>
```

**–°–æ—Ö—Ä–∞–Ω–∏:** `Ctrl+X`, `Y`, `Enter`

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∞–π—Ç–∞

```bash
sudo a2ensite bigo-backend.conf
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```bash
sudo apache2ctl configtest
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `Syntax OK`

### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Apache

```bash
sudo systemctl reload apache2
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**

```bash
sudo systemctl status apache2
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `active (running)`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã (–ø–æ–∫–∞ –±–µ–∑ HTTPS)

```bash
curl http://api.bigo.1tlt.ru/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status":"ok","timestamp":"..."}`

---

## üîí –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot

```bash
sudo apt install -y certbot python3-certbot-apache
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–∏

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É–±–µ–¥–∏—Å—å, —á—Ç–æ:

1. DNS –∑–∞–ø–∏—Å—å `api.bigo.1tlt.ru` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å DNS:
   ```bash
   nslookup api.bigo.1tlt.ru
   # –∏–ª–∏
   dig api.bigo.1tlt.ru
   ```
   
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å IP –∞–¥—Ä–µ—Å —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
sudo certbot --apache -d api.bigo.1tlt.ru
```

**–í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Certbot —Å–ø—Ä–æ—Å–∏—Ç:**

1. **Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** –í–≤–µ–¥–∏ —Å–≤–æ–π email
2. **–°–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏:** `A` (Agree)
3. **–ü–æ–¥–µ–ª–∏—Ç—å—Å—è email:** `Y` –∏–ª–∏ `N` (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
4. **HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç:** `2` (Redirect) - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
```
Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/api.bigo.1tlt.ru/fullchain.pem
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
sudo certbot renew --dry-run
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `The dry run was successful`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS

```bash
curl https://api.bigo.1tlt.ru/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status":"ok","timestamp":"..."}`

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
–û—Ç–∫—Ä–æ–π `https://api.bigo.1tlt.ru/api/health` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–π –∑–∞–º–æ—á–µ–∫ üîí

---

## ‚úÖ –®–∞–≥ 5: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### 1. Backend —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
pm2 status
pm2 logs bigo-backend --lines 20
```

#### 2. Apache –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

```bash
curl https://api.bigo.1tlt.ru/api/health
```

#### 3. WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏:

```javascript
const socket = io('https://api.bigo.1tlt.ru');
socket.on('connect', () => console.log('Connected!'));
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í –∫–æ–Ω—Å–æ–ª–∏ `Connected!`

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CORS –≤ .env (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
cd /var/www/bigo-mvp/backend
sudo nano .env
```

–£–±–µ–¥–∏—Å—å, —á—Ç–æ `CORS_ORIGIN` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –¥–æ–º–µ–Ω—ã:

```env
CORS_ORIGIN=https://bigo.1tlt.ru,https://api.bigo.1tlt.ru,https://admin.bigo.1tlt.ru
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ backend:

```bash
pm2 restart bigo-backend
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å UFW)

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
sudo ufw status

# –ï—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω, –≤–∫–ª—é—á–∏ –∏ –æ—Ç–∫—Ä–æ–π –ø–æ—Ä—Ç—ã
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Port Forwarding –≤ —Ä–æ—É—Ç–µ—Ä–µ

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞ —Ä–æ—É—Ç–µ—Ä–æ–º, –Ω–∞—Å—Ç—Ä–æ–π port forwarding:

1. –ó–∞–π–¥–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—É—Ç–µ—Ä–∞ (–æ–±—ã—á–Ω–æ `192.168.1.1` –∏–ª–∏ `192.168.0.1`)
2. –ù–∞–π–¥–∏ "Port Forwarding" / "–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã" / "–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤"
3. –î–æ–±–∞–≤—å –ø—Ä–∞–≤–∏–ª–∞:
   - **–í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç 80** ‚Üí **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞:80**
   - **–í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç 443** ‚Üí **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞:443**
4. –°–æ—Ö—Ä–∞–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–Ω–µ

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:

```
https://api.bigo.1tlt.ru/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** JSON –æ—Ç–≤–µ—Ç `{"status":"ok"}`

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –ß–µ–∫–ª–∏—Å—Ç:

- [ ] Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (v18+)
- [ ] PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- [ ] Backend –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ PM2 (`pm2 status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `online`)
- [ ] Backend –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `http://localhost:5000/api/health`
- [ ] Apache –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã (proxy, proxy_http, proxy_wstunnel, ssl)
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `bigo-backend.conf` —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
- [ ] Apache –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] HTTP —Ä–∞–±–æ—Ç–∞–µ—Ç: `http://api.bigo.1tlt.ru/api/health`
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ Certbot
- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç: `https://api.bigo.1tlt.ru/api/health`
- [ ] WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞)
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] Port forwarding –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Ä–æ—É—Ç–µ—Ä–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## üìù –®–∞–≥ 6: –î–µ–ø–ª–æ–π Web –∏ Admin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### –ß–∞—Å—Ç—å A: –î–µ–ø–ª–æ–π Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Vercel

#### 6.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –∑–∞–ª–∏—Ç –Ω–∞ GitHub:**

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª)
cd c:\Users\1\Documents\bigo
git init
git add .
git commit -m "Initial commit"

# –°–æ–∑–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∑–∞—Ç–µ–º:
git remote add origin https://github.com/–í–ê–®-USERNAME/bigo-mvp.git
git push -u origin main
```

#### 6.2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Vercel

1. –ó–∞–π–¥–∏ –Ω–∞ [Vercel.com](https://vercel.com)
2. –ù–∞–∂–º–∏ **"Sign Up"**
3. –í—ã–±–µ—Ä–∏ **"Continue with GitHub"**
4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è —á–µ—Ä–µ–∑ GitHub
5. –†–∞–∑—Ä–µ—à–∏ Vercel –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º

#### 6.3. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Vercel –Ω–∞–∂–º–∏ **"Add New..." ‚Üí "Project"**
2. –í —Å–ø–∏—Å–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞–π–¥–∏ `bigo-mvp` –∏ –Ω–∞–∂–º–∏ **"Import"**

#### 6.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Web

**–í —Ä–∞–∑–¥–µ–ª–µ "Configure Project":**

1. **Project Name:** `bigo-web` (–∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

2. **Root Directory:**
   - –ù–∞–∂–º–∏ **"Edit"** —Ä—è–¥–æ–º —Å Root Directory
   - –í–≤–µ–¥–∏: `frontend/web`
   - –ù–∞–∂–º–∏ **"Continue"**

3. **Framework Preset:**
   - –î–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è: `Next.js`
   - –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã–±–µ—Ä–∏ –≤—Ä—É—á–Ω—É—é `Next.js`

4. **Build Command:**
   - –û—Å—Ç–∞–≤—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `npm run build`
   - –ò–ª–∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–∞–º: `npm run build`

5. **Output Directory:**
   - –û—Å—Ç–∞–≤—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `.next`
   - –ò–ª–∏: `.next` (–¥–ª—è Next.js)

6. **Install Command:**
   - –û—Å—Ç–∞–≤—å: `npm install`

#### 6.5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Environment Variables –¥–ª—è Web

**–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –¥–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

1. –í —Ä–∞–∑–¥–µ–ª–µ **"Environment Variables"** –Ω–∞–∂–º–∏ **"Add"**

2. –î–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** `NEXT_PUBLIC_API_URL`
   - **Value:** `https://api.bigo.1tlt.ru`
   - **Environment:** –í—ã–±–µ—Ä–∏ –≤—Å–µ (Production, Preview, Development)
   - –ù–∞–∂–º–∏ **"Save"**

3. –î–æ–±–∞–≤—å –≤—Ç–æ—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** `NEXT_PUBLIC_SOCKET_URL`
   - **Value:** `https://api.bigo.1tlt.ru`
   - **Environment:** –í—ã–±–µ—Ä–∏ –≤—Å–µ
   - –ù–∞–∂–º–∏ **"Save"**
   
   **–í–∞–∂–Ω–æ:** –í Next.js –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `NEXT_PUBLIC_`

4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Stripe:
   - **Key:** `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`
   - **Value:** `pk_test_—Ç–≤–æ–π-–∫–ª—é—á`
   - **Environment:** –í—Å–µ
   - –ù–∞–∂–º–∏ **"Save"**

#### 6.6. –î–µ–ø–ª–æ–π Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Deploy"** –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. –î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ (–æ–±—ã—á–Ω–æ 2-5 –º–∏–Ω—É—Ç)
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —É–≤–∏–¥–∏—à—å:
   - ‚úÖ **"Ready"** —Å—Ç–∞—Ç—É—Å
   - URL –≤–∏–¥–∞: `https://bigo-web.vercel.app` –∏–ª–∏ `https://bigo-mvp-xxx.vercel.app`

**–°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ—Ç URL!** –≠—Ç–æ –∞–¥—Ä–µ—Å —Ç–≤–æ–µ–≥–æ Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

#### 6.7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –¥–ª—è Web (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `bigo.1tlt.ru`:

1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞ Vercel –ø–µ—Ä–µ–π–¥–∏ –≤ **"Settings" ‚Üí "Domains"**
2. –í–≤–µ–¥–∏ –¥–æ–º–µ–Ω: `bigo.1tlt.ru`
3. –ù–∞–∂–º–∏ **"Add"**
4. Vercel –ø–æ–∫–∞–∂–µ—Ç DNS –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
   - –û–±—ã—á–Ω–æ —ç—Ç–æ CNAME –∑–∞–ø–∏—Å—å: `bigo.1tlt.ru` ‚Üí `cname.vercel-dns.com`
5. –î–æ–±–∞–≤—å —ç—Ç—É –∑–∞–ø–∏—Å—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö DNS —Ç–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞
6. –ü–æ–¥–æ–∂–¥–∏ 5-10 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS
7. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

---

### –ß–∞—Å—Ç—å B: –î–µ–ø–ª–æ–π Admin –ø–∞–Ω–µ–ª–∏ –Ω–∞ Vercel

#### 6.8. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Admin

1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Vercel —Å–Ω–æ–≤–∞ –Ω–∞–∂–º–∏ **"Add New..." ‚Üí "Project"**
2. –í—ã–±–µ—Ä–∏ —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `bigo-mvp`
3. –ù–∞–∂–º–∏ **"Import"**

#### 6.9. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Admin

**–í —Ä–∞–∑–¥–µ–ª–µ "Configure Project":**

1. **Project Name:** `bigo-admin` (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –∏–º—è)

2. **Root Directory:**
   - –ù–∞–∂–º–∏ **"Edit"**
   - –í–≤–µ–¥–∏: `admin`
   - –ù–∞–∂–º–∏ **"Continue"**

3. **Framework Preset:**
   - –î–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è: `Next.js`
   - –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã–±–µ—Ä–∏ `Next.js`

4. **Build Command:**
   - –û—Å—Ç–∞–≤—å: `npm run build`

5. **Output Directory:**
   - –û—Å—Ç–∞–≤—å: `.next`

#### 6.10. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Environment Variables –¥–ª—è Admin

1. –í —Ä–∞–∑–¥–µ–ª–µ **"Environment Variables"** –Ω–∞–∂–º–∏ **"Add"**

2. –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** `NEXT_PUBLIC_API_URL`
   - **Value:** `https://api.bigo.1tlt.ru`
   - **Environment:** –í—Å–µ (Production, Preview, Development)
   - –ù–∞–∂–º–∏ **"Save"**
   
   **–í–∞–∂–Ω–æ:** –í Next.js –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `NEXT_PUBLIC_`

#### 6.11. –î–µ–ø–ª–æ–π Admin –ø–∞–Ω–µ–ª–∏

1. –ù–∞–∂–º–∏ **"Deploy"**
2. –î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
3. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—à—å URL: `https://bigo-admin.vercel.app`

**–°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ—Ç URL!**

#### 6.12. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –¥–ª—è Admin (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `admin.bigo.1tlt.ru`:

1. –í –ø—Ä–æ–µ–∫—Ç–µ Admin –Ω–∞ Vercel: **"Settings" ‚Üí "Domains"**
2. –í–≤–µ–¥–∏: `admin.bigo.1tlt.ru`
3. –î–æ–±–∞–≤—å CNAME –∑–∞–ø–∏—Å—å –≤ DNS: `admin.bigo.1tlt.ru` ‚Üí `cname.vercel-dns.com`
4. –ü–æ–¥–æ–∂–¥–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

---

### –ß–∞—Å—Ç—å C: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CORS –Ω–∞ Backend

#### 6.13. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Backend

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Web –∏ Admin, –æ–±–Ω–æ–≤–∏ CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh username@—Ç–≤–æ–π-ip-–∞–¥—Ä–µ—Å

# –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/bigo-mvp/backend

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env
sudo nano .env
```

**–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–æ–∫—É CORS_ORIGIN:**

```env
CORS_ORIGIN=https://bigo.1tlt.ru,https://api.bigo.1tlt.ru,https://admin.bigo.1tlt.ru,https://bigo-web.vercel.app,https://bigo-admin.vercel.app
```

**–ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–æ–º–µ–Ω—ã:**

```env
CORS_ORIGIN=https://bigo.1tlt.ru,https://api.bigo.1tlt.ru,https://admin.bigo.1tlt.ru
```

**–°–æ—Ö—Ä–∞–Ω–∏:** `Ctrl+X`, `Y`, `Enter`

#### 6.14. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Backend

```bash
pm2 restart bigo-backend
pm2 logs bigo-backend --lines 20
```

**–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö.**

---

### –ß–∞—Å—Ç—å D: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

#### 6.15. –ü—Ä–æ–≤–µ—Ä–∫–∞ Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ URL Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   ```
   https://bigo-web.vercel.app
   # –∏–ª–∏
   https://bigo.1tlt.ru (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω)
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å:**
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - ‚úÖ –ú–æ–∂–µ—à—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
   - ‚úÖ –ú–æ–∂–µ—à—å –≤–æ–π—Ç–∏
   - ‚úÖ –í–∏–¥–∏—à—å —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–æ–≤
   - ‚úÖ –ú–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∏–º
   - ‚úÖ –ú–æ–∂–µ—à—å —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∏–º
   - ‚úÖ –ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –ü–æ–¥–∞—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

3. **–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CORS
   - Socket.IO –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è
   - WebRTC –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

#### 6.16. –ü—Ä–æ–≤–µ—Ä–∫–∞ Admin –ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://bigo-admin.vercel.app
   # –∏–ª–∏
   https://admin.bigo.1tlt.ru
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å:**
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - ‚úÖ –ú–æ–∂–µ—à—å –≤–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
   - ‚úÖ –í–∏–¥–∏—à—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
   - ‚úÖ –ú–æ–∂–µ—à—å —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   - ‚úÖ –ú–æ–∂–µ—à—å —É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç—Ä–∏–º–∞–º–∏
   - ‚úÖ –ú–æ–∂–µ—à—å –∏–∑–º–µ–Ω—è—Ç—å –±–∞–ª–∞–Ω—Å—ã

#### 6.17. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Backend

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ API
fetch('https://api.bigo.1tlt.ru/api/health')
  .then(r => r.json())
  .then(console.log)
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {status: "ok", timestamp: "..."}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket
const socket = io('https://api.bigo.1tlt.ru');
socket.on('connect', () => console.log('‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω!'));
socket.on('connect_error', (err) => console.error('‚ùå –û—à–∏–±–∫–∞:', err));
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ API –æ—Ç–≤–µ—á–∞–µ—Ç
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

### –ß–∞—Å—Ç—å E: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### 6.18. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API_URL –≤ Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
cd c:\Users\1\Documents\bigo\frontend\mobile
```

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª: `src/contexts/AuthContext.js`

–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É:
```javascript
const API_URL = 'http://localhost:5000';
```

–ó–∞–º–µ–Ω–∏ –Ω–∞:
```javascript
const API_URL = 'https://api.bigo.1tlt.ru';
```

–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª.

#### 6.19. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –î–ª—è Android
npx react-native run-android

# –î–ª—è iOS (—Ç–æ–ª—å–∫–æ –Ω–∞ macOS)
npx react-native run-ios
```

**–ü—Ä–æ–≤–µ—Ä—å:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –ú–æ–∂–µ—à—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è/–≤–æ–π—Ç–∏
- ‚úÖ –í–∏–¥–∏—à—å —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–æ–≤
- ‚úÖ –ú–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∏–º
- ‚úÖ –ú–æ–∂–µ—à—å —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∏–º
- ‚úÖ –ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–¥–∞—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —à–∞–≥–∞ 6

- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–ª–∏—Ç –Ω–∞ GitHub
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ Vercel —á–µ—Ä–µ–∑ GitHub
- [ ] Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Vercel
- [ ] Environment Variables –¥–ª—è Web –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (API_URL, SOCKET_URL)
- [ ] Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ URL
- [ ] Admin –ø–∞–Ω–µ–ª—å –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –Ω–∞ Vercel
- [ ] Environment Variables –¥–ª—è Admin –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (API_URL)
- [ ] Admin –ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ URL
- [ ] CORS –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ Backend —Å–µ—Ä–≤–µ—Ä–µ
- [ ] Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ PM2
- [ ] Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend
- [ ] Admin –ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend
- [ ] Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ —Å –Ω–æ–≤—ã–º API_URL
- [ ] Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ URL

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–∞ 6 —É —Ç–µ–±—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:

- **Backend API:** `https://api.bigo.1tlt.ru`
- **Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** `https://bigo-web.vercel.app` (–∏–ª–∏ `https://bigo.1tlt.ru`)
- **Admin –ø–∞–Ω–µ–ª—å:** `https://bigo-admin.vercel.app` (–∏–ª–∏ `https://admin.bigo.1tlt.ru`)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —à–∞–≥–∞ 6

### Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend

**–ü—Ä–æ–±–ª–µ–º–∞:** CORS –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `CORS_ORIGIN` –≤ `.env` backend —Å–æ–¥–µ—Ä–∂–∏—Ç URL Vercel
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ backend: `pm2 restart bigo-backend`
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `pm2 logs bigo-backend`

### Vercel –Ω–µ –º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** Build failed –Ω–∞ Vercel

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ Vercel
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `package.json` –≤ `frontend/web` –∏ `admin` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã –≤ `package.json`
4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Root Directory —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### Environment Variables –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** API_URL –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –í Next.js –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `NEXT_PUBLIC_` –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö —Ç–æ–ª—å–∫–æ –≤ `getServerSideProps` / `getStaticProps`
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Socket.IO –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `SOCKET_URL` –≤ Environment Variables –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∞ Backend Apache –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç WebSocket
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Apache: `sudo tail -f /var/log/apache2/error.log`

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–∞ 6 —Ç–≤–æ–π —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–µ–ø–ª–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è, –ø–æ–¥–∫–ª—é—á–∏—Å—å –∫ MongoDB –∏ –≤—ã–ø–æ–ª–Ω–∏:

```javascript
use streaming-mvp

// –°–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è —á–µ—Ä–µ–∑ API, –∑–∞—Ç–µ–º:
db.users.updateOne(
  { email: "—Ç–≤–æ–π-email@example.com" },
  { $set: { role: "admin" } }
)
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
pm2 logs bigo-backend

# –ü—Ä–æ–≤–µ—Ä—å .env —Ñ–∞–π–ª
cat /var/www/bigo-mvp/backend/.env

# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
sudo netstat -tulpn | grep 5000
```

### Apache –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo apache2ctl configtest

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
sudo tail -f /var/log/apache2/error.log

# –£–±–µ–¥–∏—Å—å, —á—Ç–æ –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã
apache2ctl -M | grep proxy
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å DNS: `nslookup api.bigo.1tlt.ru` –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ Apache —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 80: `sudo netstat -tulpn | grep :80`

### WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –º–æ–¥—É–ª—å `proxy_wstunnel` –≤–∫–ª—é—á–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å RewriteRule –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Apache
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Apache: `sudo tail -f /var/log/apache2/error.log`

---

## üìû –ì–æ—Ç–æ–≤–æ!

–¢–≤–æ–π backend —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
**https://api.bigo.1tlt.ru**

–ü—Ä–æ–≤–µ—Ä—å:
- Health check: https://api.bigo.1tlt.ru/api/health
- API —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON
- WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ - –∑–∞–¥–µ–ø–ª–æ–π Web –∏ Admin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Vercel! üöÄ

