# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API

## –ü—Ä–æ–±–ª–µ–º–∞
- `ERR_CONNECTION_TIMED_OUT` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ `api.bigo.1tlt.ru`
- 404 –æ—à–∏–±–∫–∏

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ:

1. **–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã axios –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–ª–∏–µ–Ω—Ç** —Å —Ç–∞–π–º–∞—É—Ç–æ–º 30 —Å–µ–∫—É–Ω–¥
2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. **–í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π axios –∫–ª–∏–µ–Ω—Ç** –∏–∑ `frontend/web/lib/axios.js`

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ
curl http://localhost:5000/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π –¥–æ–º–µ–Ω
curl https://api.bigo.1tlt.ru/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status":"ok","timestamp":"..."}`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±—ç–∫–µ–Ω–¥–∞

```bash
pm2 status
pm2 logs bigo-backend --lines 30
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel

–í **Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:

- `NEXT_PUBLIC_API_URL` = `https://api.bigo.1tlt.ru`
- `NEXT_PUBLIC_SOCKET_URL` = `https://api.bigo.1tlt.ru`

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ **–ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç** –Ω–∞ Vercel.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–í `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```bash
CORS_ORIGIN=https://bigo-mvp.vercel.app,https://bigo-mvp.vercel.app/*
```

–ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞:

```bash
CORS_ORIGIN=*
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
pm2 restart bigo-backend --update-env
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ `http://localhost:5000`
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ Firewall

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 5000 (–∏–ª–∏ 443 –¥–ª—è HTTPS) –æ—Ç–∫—Ä—ã—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
netstat -tlnp | grep 5000
# –∏–ª–∏
ss -tlnp | grep 5000
```

## üõ† –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

### –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±—ç–∫–µ–Ω–¥:**
   ```bash
   pm2 restart bigo-backend --update-env
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏:**
   ```bash
   pm2 logs bigo-backend --err --lines 50
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `MONGODB_URI` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `.env`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MongoDB

### –ï—Å–ª–∏ ERR_CONNECTION_TIMED_OUT:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:**
   ```bash
   nslookup api.bigo.1tlt.ru
   ping api.bigo.1tlt.ru
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:**
   ```bash
   curl -v https://api.bigo.1tlt.ru/api/health
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx/Reverse Proxy**

## üìù –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞

