# Полное обновление сервера с исправлением ошибок

## Шаг 1: Обновление кода из Git

```bash
# 1. Перейдите в корневую директорию
cd /ssd/www/bigo-mvp

# 2. Отмените локальные изменения
git checkout -- frontend/web/ecosystem.config.js

# 3. Получите последние изменения
git pull origin master

# 4. Проверьте версию
git log --oneline -1
```

## Шаг 2: Исправление бэкенда (статус "errored")

```bash
# 1. Проверьте логи бэкенда
pm2 logs bigo-backend --lines 50

# 2. Если есть ошибки, перезапустите бэкенд
cd /ssd/www/bigo-mvp/backend
pm2 restart bigo-backend --update-env

# 3. Проверьте статус
pm2 status
```

## Шаг 3: Обновление фронтенда

```bash
# 1. Перейдите в директорию фронтенда
cd /ssd/www/bigo-mvp/frontend/web

# 2. Остановите PM2
pm2 stop nio-frontend

# 3. Удалите старую сборку (ОБЯЗАТЕЛЬНО!)
rm -rf .next

# 4. Пересоберите проект
npm run build

# 5. Запустите PM2 снова
pm2 restart nio-frontend

# 6. Проверьте статус
pm2 status

# 7. Проверьте логи
pm2 logs nio-frontend --lines 30
```

## Шаг 4: Финальная проверка

```bash
# Проверьте статус всех процессов
pm2 status

# Все должны быть "online", не "errored"

# Проверьте логи всех процессов
pm2 logs --lines 20
```

## Если бэкенд все еще в ошибке:

```bash
cd /ssd/www/bigo-mvp/backend

# Проверьте логи
pm2 logs bigo-backend --err --lines 50

# Переустановите зависимости (если нужно)
npm install

# Перезапустите
pm2 restart bigo-backend --update-env
```



